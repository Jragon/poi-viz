{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://jragon.github.io/poi-viz/fixtures/state-cases.schema.json",
  "title": "Poi Fixture State Cases",
  "type": "object",
  "additionalProperties": false,
  "required": ["schemaVersion", "cases"],
  "properties": {
    "schemaVersion": {
      "const": 1
    },
    "cases": {
      "type": "array",
      "items": {
        "$ref": "#/$defs/fixtureCase"
      }
    }
  },
  "$defs": {
    "phaseReference": {
      "type": "string",
      "enum": ["right", "down", "left", "up"]
    },
    "handState": {
      "type": "object",
      "additionalProperties": false,
      "required": ["armSpeed", "armPhase", "armRadius", "poiSpeed", "poiPhase", "poiRadius"],
      "properties": {
        "armSpeed": { "type": "number" },
        "armPhase": { "type": "number" },
        "armRadius": { "type": "number" },
        "poiSpeed": { "type": "number" },
        "poiPhase": { "type": "number" },
        "poiRadius": { "type": "number" }
      }
    },
    "globalState": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "bpm",
        "loopBeats",
        "playSpeed",
        "isPlaying",
        "t",
        "showTrails",
        "trailBeats",
        "trailSampleHz",
        "showWaves",
        "phaseReference"
      ],
      "properties": {
        "bpm": { "type": "number" },
        "loopBeats": { "type": "number" },
        "playSpeed": { "type": "number" },
        "isPlaying": { "type": "boolean" },
        "t": { "type": "number" },
        "showTrails": { "type": "boolean" },
        "trailBeats": { "type": "number" },
        "trailSampleHz": { "type": "number" },
        "showWaves": { "type": "boolean" },
        "phaseReference": { "$ref": "#/$defs/phaseReference" }
      }
    },
    "appState": {
      "type": "object",
      "additionalProperties": false,
      "required": ["global", "hands"],
      "properties": {
        "global": { "$ref": "#/$defs/globalState" },
        "hands": {
          "type": "object",
          "additionalProperties": false,
          "required": ["L", "R"],
          "properties": {
            "L": { "$ref": "#/$defs/handState" },
            "R": { "$ref": "#/$defs/handState" }
          }
        }
      }
    },
    "fixtureCase": {
      "type": "object",
      "additionalProperties": false,
      "required": ["id", "state"],
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^[a-z0-9]+(?:-[a-z0-9]+)*$",
          "not": {
            "const": "default"
          }
        },
        "state": {
          "$ref": "#/$defs/appState"
        }
      }
    }
  }
}
